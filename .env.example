# =============================================================================
# GitHub Runner - Self-Hosted Runner Configuration
# =============================================================================
# BAUER GROUP Self-Hosted GitHub Runner with Docker-in-Docker (DinD)
# Uses myoung34/github-runner:latest for ephemeral runners
# =============================================================================

# -----------------------------------------------------------------------------
# STACK IDENTIFICATION
# -----------------------------------------------------------------------------
# Name used as prefix for container/volume/network names
# Allows multiple deployments on same host without conflicts
STACK_NAME=github-runner

# Timezone for all services (affects log timestamps)
TIME_ZONE=Etc/UTC

# -----------------------------------------------------------------------------
# GITHUB CONFIGURATION (REQUIRED)
# -----------------------------------------------------------------------------
# Choose ONE of these authentication methods:

# Option 1: Personal Access Token (PAT) - Simplest setup
# Create at: https://github.com/settings/tokens
# Required scopes: repo, admin:org (for org runners) or admin:repo_hook (for repo runners)
GITHUB_ACCESS_TOKEN=ghp_xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx

# Option 2: GitHub App (Recommended for production)
# Create at: https://github.com/organizations/{org}/settings/apps
# Permissions: Administration (Read & Write), Self-hosted runners (Read & Write)
# APP_ID=123456
# APP_LOGIN=bauer-group
# APP_PRIVATE_KEY=/path/to/private-key.pem

# Target: Organization URL or Repository URL
# For organization runner: https://github.com/bauer-group
# For repository runner: https://github.com/bauer-group/your-repo
REPO_URL=https://github.com/bauer-group

# Runner scope: org (organization) or repo (single repository)
RUNNER_SCOPE=org

# -----------------------------------------------------------------------------
# RUNNER CONFIGURATION
# -----------------------------------------------------------------------------
# Runner name prefix (will be appended with random suffix for uniqueness)
RUNNER_NAME_PREFIX=self-hosted

# Runner group (must exist in GitHub, check org settings)
# Example: "Default", "Self-Hosted (BAUER GROUP)"
RUNNER_GROUP=Self-Hosted (BAUER GROUP)

# Additional runner labels (comma-separated)
# Note: Default labels (self-hosted, linux, x64) are set automatically
# Use in workflows: runs-on: [self-hosted, docker, 48-core]
RUNNER_LABELS=docker,48-core

# -----------------------------------------------------------------------------
# DOCKER-IN-DOCKER CONFIGURATION
# -----------------------------------------------------------------------------
# DinD image tag
DIND_IMAGE=dind

# Docker storage driver for DinD
# Options: overlay2 (default, recommended), vfs (slower but more compatible)
DOCKER_STORAGE_DRIVER=overlay2

# Docker MTU (adjust if network issues occur, default: 1500)
# Lower values (e.g., 1450) may be needed in some cloud environments
DOCKER_MTU=1500

# Enable BuildKit for faster builds
DOCKER_BUILDKIT=1

# -----------------------------------------------------------------------------
# RESOURCE LIMITS
# -----------------------------------------------------------------------------
# Runner container resources (limits only, no reservations to avoid blocking)
RUNNER_MEMORY_LIMIT=32g
RUNNER_CPU_LIMIT=16

# DinD container resources (should be generous for builds)
DIND_MEMORY_LIMIT=32g
DIND_CPU_LIMIT=16

# Shared memory size for DinD (important for large builds)
DIND_SHM_SIZE=8g

# -----------------------------------------------------------------------------
# LOGGING CONFIGURATION
# -----------------------------------------------------------------------------
# Maximum log file size
LOG_MAX_SIZE=50m

# Number of log files to keep
LOG_MAX_FILE=5

# -----------------------------------------------------------------------------
# OPTIONAL: HTTP PROXY CONFIGURATION
# -----------------------------------------------------------------------------
# Configure if runners need to access internet through proxy
# HTTP_PROXY=http://proxy.example.com:8080
# HTTPS_PROXY=http://proxy.example.com:8080
# NO_PROXY=localhost,127.0.0.1,.local
